(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{3795:function(e,r,n){"use strict";n.d(r,{Z:function(){return E}});var t=n(3366),o=n(7462),i=n(7294),a=n(6010),s=n(4780),c=n(8216),l=n(948),d=n(1657),u=n(8791),h=n(1705),x=n(5861),Z=n(1588),p=n(4867);function j(e){return(0,p.Z)("MuiLink",e)}let m=(0,Z.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var f=n(4844),b=n(1796);let g={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=e=>g[e]||e,v=({theme:e,ownerState:r})=>{let n=y(r.color),t=(0,f.DW)(e,`palette.${n}`,!1)||r.color,o=(0,f.DW)(e,`palette.${n}Channel`);return"vars"in e&&o?`rgba(${o} / 0.4)`:(0,b.Fq)(t,.4)};var w=n(5893);let C=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],k=e=>{let{classes:r,component:n,focusVisible:t,underline:o}=e,i={root:["root",`underline${(0,c.Z)(o)}`,"button"===n&&"button",t&&"focusVisible"]};return(0,s.Z)(i,j,r)},S=(0,l.ZP)(x.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:n}=e;return[r.root,r[`underline${(0,c.Z)(n.underline)}`],"button"===n.component&&r.button]}})(({theme:e,ownerState:r})=>(0,o.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,o.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:v({theme:e,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${m.focusVisible}`]:{outline:"auto"}})),_=i.forwardRef(function(e,r){let n=(0,d.Z)({props:e,name:"MuiLink"}),{className:s,color:c="primary",component:l="a",onBlur:x,onFocus:Z,TypographyClasses:p,underline:j="always",variant:m="inherit",sx:f}=n,b=(0,t.Z)(n,C),{isFocusVisibleRef:y,onBlur:v,onFocus:_,ref:E}=(0,u.Z)(),[A,D]=i.useState(!1),W=(0,h.Z)(r,E),N=e=>{v(e),!1===y.current&&D(!1),x&&x(e)},F=e=>{_(e),!0===y.current&&D(!0),Z&&Z(e)},P=(0,o.Z)({},n,{color:c,component:l,focusVisible:A,underline:j,variant:m}),L=k(P);return(0,w.jsx)(S,(0,o.Z)({color:c,className:(0,a.Z)(L.root,s),classes:p,component:l,onBlur:N,onFocus:F,ref:W,ownerState:P,variant:m,sx:[...Object.keys(g).includes(c)?[]:[{color:c}],...Array.isArray(f)?f:[f]]},b))});var E=_},8623:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/big-orders",function(){return n(3552)}])},3552:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return z}});var t=n(5893),o=n(9008),i=n.n(o),a=n(8005),s=n(7357),c=n(5582),l=n(6447),d=n(5861),u=n(3321),h=n(3219),x=n(4150),Z=n(8334),p=n(7294),j=n(5642),m=n(9396),f=n(6242),b=n(7709),g=n(7109);let y=()=>(0,t.jsx)(f.Z,{sx:{p:2},children:(0,t.jsx)(b.Z,{defaultValue:"",fullWidth:!0,placeholder:"Buscar pedido",startAdornment:(0,t.jsx)(g.Z,{position:"start",children:(0,t.jsx)(h.Z,{color:"action",fontSize:"small",children:(0,t.jsx)(m.Z,{})})}),sx:{maxWidth:500}})});var v=n(7906),w=n(3184),C=n(3816),k=n(8102),S=n(295),_=n(3795),E=n(2377);let A=e=>{let{items:r=[]}=e;return(0,t.jsx)(f.Z,{children:(0,t.jsx)(E.L,{children:(0,t.jsx)(s.Z,{sx:{minWidth:800},children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(w.Z,{children:(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(k.Z,{children:"Fecha"}),(0,t.jsx)(k.Z,{children:"Estado"}),(0,t.jsx)(k.Z,{children:"Acciones"})]})}),(0,t.jsx)(S.Z,{children:r.map(e=>(0,t.jsxs)(C.Z,{hover:!0,children:[(0,t.jsx)(k.Z,{children:(0,t.jsx)(l.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,t.jsx)(d.Z,{variant:"subtitle2",children:e.date})})}),(0,t.jsx)(k.Z,{children:e.status}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(_.Z,{href:"/big-order-details?id=".concat(e._id),passHref:!0,children:(0,t.jsx)(u.Z,{variant:"outlined",children:"Ver detalle"})})})]},e._id))})]})})})})};var D=n(6798),W=n(1737),N=n(8445),F=n(4267),P=n(1426),L=n(4371),V=n(7720),$=n(2023);let M=()=>{let[e,r]=(0,p.useState)({name:"",department:""}),[n,o]=(0,p.useState)(!1),[i,a]=(0,p.useState)("success"),[c,l]=(0,p.useState)(""),d=(e,r)=>{a(e),l(r),o(!0)},h=(e,r)=>{"clickaway"!==r&&o(!1)},x=(0,p.useCallback)(e=>{r(r=>({...r,[e.target.name]:e.target.value}))},[]),Z=(0,p.useCallback)(async r=>{r.preventDefault();try{await (0,j.gi)({date:m(e.date)}),d("success","Pedido creado correctamente")}catch(e){d("error","Error creating order"),console.log("Error saving order:",e)}},[e]),m=e=>{let[r,n,t]=e.split("-");return"".concat(t,"/").concat(n,"/").concat(r)};return(0,t.jsxs)("form",{autoComplete:"off",noValidate:!0,onSubmit:Z,children:[(0,t.jsx)(D.Z,{open:n,autoHideDuration:6e3,onClose:h,children:(0,t.jsx)(W.Z,{onClose:h,severity:i,sx:{width:"100%"},children:c})}),(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(N.Z,{subheader:""}),(0,t.jsx)(F.Z,{sx:{pt:0},children:(0,t.jsx)(s.Z,{sx:{m:-1.5},children:(0,t.jsx)(P.Z,{container:!0,spacing:3,children:(0,t.jsx)(P.Z,{xs:12,md:6,children:(0,t.jsx)(L.Z,{type:"date",fullWidth:!0,label:"Fecha",name:"date",onChange:x,required:!0,value:e.date})})})})}),(0,t.jsx)(V.Z,{}),(0,t.jsx)($.Z,{sx:{justifyContent:"flex-end"},children:(0,t.jsx)(u.Z,{variant:"contained",onClick:Z,children:"Generar pedido"})})]})]})},O=()=>{let[e,r]=(0,p.useState)([]),[n,o]=(0,p.useState)(!1),Z=()=>o(!0),m=()=>o(!1),f=async()=>{try{let e=await (0,j.XO)();r(e)}catch(e){console.error("Error fetching cities:",e)}};return(0,p.useEffect)(()=>{f()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"Pedidos"})}),(0,t.jsx)(s.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,t.jsx)(c.Z,{maxWidth:"xl",children:(0,t.jsxs)(l.Z,{spacing:3,children:[(0,t.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,t.jsx)(l.Z,{spacing:1,children:(0,t.jsx)(d.Z,{variant:"h4",children:"Pedidos"})}),(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{onClick:Z,startIcon:(0,t.jsx)(h.Z,{fontSize:"small",children:(0,t.jsx)(a.Z,{})}),variant:"contained",children:"Agregar nuevo pedido"})})]}),(0,t.jsx)(y,{}),(0,t.jsx)(A,{count:e.length,items:e}),(0,t.jsx)(x.Z,{open:n,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,t.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Crear pedido"}),(0,t.jsx)("div",{id:"modal-modal-description",sx:{mt:2},children:(0,t.jsx)(M,{})})]})})]})})})]})};O.getLayout=e=>(0,t.jsx)(Z.A,{children:e});var z=O},5642:function(e,r,n){"use strict";n.d(r,{XO:function(){return i},aK:function(){return a},gi:function(){return s}});var t=n(5121);let o="http://localhost:3000/api",i=async()=>{try{let e=await t.Z.get("".concat(o,"/big-orders"));return e.data}catch(e){throw console.error("Error fetching cities:",e),e}},a=async e=>{try{let r=await t.Z.get("".concat(o,"/big-orders/").concat(e));return r.data}catch(e){throw console.error("Error fetching cities:",e),e}},s=async e=>{try{let r=await t.Z.post("".concat(o,"/big-orders"),e);return r.data}catch(e){throw console.error("Error creating cities:",e),e}}}},function(e){e.O(0,[823,904,709,972,371,498,71,798,808,334,774,888,179],function(){return e(e.s=8623)}),_N_E=e.O()}]);