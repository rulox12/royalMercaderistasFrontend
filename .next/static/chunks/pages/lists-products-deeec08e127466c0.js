(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{3321:function(t,e,r){"use strict";r.d(e,{Z:function(){return I}});var o=r(3366),a=r(7462),n=r(7294),i=r(6010),l=r(7925),s=r(4780),c=r(1796),d=r(948),u=r(1657),p=r(7739),h=r(8216),v=r(1588),x=r(4867);function g(t){return(0,x.Z)("MuiButton",t)}let m=(0,v.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),b=n.createContext({});var f=r(5893);let y=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],S=t=>{let{color:e,disableElevation:r,fullWidth:o,size:n,variant:i,classes:l}=t,c={root:["root",i,`${i}${(0,h.Z)(e)}`,`size${(0,h.Z)(n)}`,`${i}Size${(0,h.Z)(n)}`,"inherit"===e&&"colorInherit",r&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,h.Z)(n)}`],endIcon:["endIcon",`iconSize${(0,h.Z)(n)}`]},d=(0,s.Z)(c,g,l);return(0,a.Z)({},l,d)},z=t=>(0,a.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Z=(0,d.ZP)(p.Z,{shouldForwardProp:t=>(0,d.FO)(t)||"classes"===t,name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:r}=t;return[e.root,e[r.variant],e[`${r.variant}${(0,h.Z)(r.color)}`],e[`size${(0,h.Z)(r.size)}`],e[`${r.variant}Size${(0,h.Z)(r.size)}`],"inherit"===r.color&&e.colorInherit,r.disableElevation&&e.disableElevation,r.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var r,o;return(0,a.Z)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,a.Z)({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.Fq)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===e.variant&&"inherit"!==e.color&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.Fq)(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===e.variant&&"inherit"!==e.color&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.Fq)(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===e.variant&&{backgroundColor:(t.vars||t).palette.grey.A100,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===e.variant&&"inherit"!==e.color&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":(0,a.Z)({},"contained"===e.variant&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${m.focusVisible}`]:(0,a.Z)({},"contained"===e.variant&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${m.disabled}`]:(0,a.Z)({color:(t.vars||t).palette.action.disabled},"outlined"===e.variant&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"contained"===e.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===e.variant&&{padding:"6px 8px"},"text"===e.variant&&"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main},"outlined"===e.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===e.variant&&"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${(0,c.Fq)(t.palette[e.color].main,.5)}`},"contained"===e.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(o=t.palette).getContrastText)?void 0:r.call(o,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],boxShadow:(t.vars||t).shadows[2]},"contained"===e.variant&&"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},"inherit"===e.color&&{color:"inherit",borderColor:"currentColor"},"small"===e.size&&"text"===e.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===e.size&&"text"===e.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===e.size&&"outlined"===e.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===e.size&&"outlined"===e.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===e.size&&"contained"===e.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===e.size&&"contained"===e.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${m.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${m.disabled}`]:{boxShadow:"none"}}),w=(0,d.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{let{ownerState:r}=t;return[e.startIcon,e[`iconSize${(0,h.Z)(r.size)}`]]}})(({ownerState:t})=>(0,a.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},z(t))),C=(0,d.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{let{ownerState:r}=t;return[e.endIcon,e[`iconSize${(0,h.Z)(r.size)}`]]}})(({ownerState:t})=>(0,a.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},z(t))),j=n.forwardRef(function(t,e){let r=n.useContext(b),s=(0,l.Z)(r,t),c=(0,u.Z)({props:s,name:"MuiButton"}),{children:d,color:p="primary",component:h="button",className:v,disabled:x=!1,disableElevation:g=!1,disableFocusRipple:m=!1,endIcon:z,focusVisibleClassName:j,fullWidth:I=!1,size:$="medium",startIcon:E,type:k,variant:R="text"}=c,P=(0,o.Z)(c,y),_=(0,a.Z)({},c,{color:p,component:h,disabled:x,disableElevation:g,disableFocusRipple:m,fullWidth:I,size:$,type:k,variant:R}),N=S(_),T=E&&(0,f.jsx)(w,{className:N.startIcon,ownerState:_,children:E}),L=z&&(0,f.jsx)(C,{className:N.endIcon,ownerState:_,children:z});return(0,f.jsxs)(Z,(0,a.Z)({ownerState:_,className:(0,i.Z)(r.className,N.root,v),component:h,disabled:x,focusRipple:!m,focusVisibleClassName:(0,i.Z)(N.focusVisible,j),ref:e,type:k},P,{classes:N,children:[T,d,L]}))});var I=j},7625:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lists-products",function(){return r(370)}])},370:function(t,e,r){"use strict";r.r(e);var o=r(5893),a=r(9008),n=r.n(a),i=r(1163),l=r(8334),s=r(3321),c=r(9100),d=r(7294),u=r(7357),p=r(5582),h=r(6447),v=r(6242),x=r(4267),g=r(4371),m=r(6798),b=r(8304);let f=()=>{let t=(0,i.useRouter)(),{id:e}=t.query,[r,a]=(0,d.useState)([]),[l,f]=(0,d.useState)([]),[y,S]=(0,d.useState)(!1),[z,Z]=(0,d.useState)(!1),w=async()=>{try{let t=await (0,c.X)();a(t);let e=t.map(t=>({productId:t._id,cost:"",salePrice:"",pvp:""}));f(e),Z(!0)}catch(t){console.error("Error fetching products:",t)}},C=async t=>{try{let e=await (0,b.TY)(t);return e}catch(t){console.error("Error fetching products:",t)}return[]},j=t=>{let e=r.map(e=>{let r=t.find(t=>t.productId===e._id);return{productId:e._id,cost:r&&r.cost||"",salePrice:r&&r.salePrice||"",pvp:r&&r.pvp||""}});f(e)};(0,d.useEffect)(()=>{w().then(()=>{z&&e&&C(e).then(t=>{console.log(t),j(t)}).catch(t=>{console.error("Error fetching products for list:",t)})})},[z,e]);let I=(t,e,r)=>{let o=[...l];o[t][e]=r,f(o)},$=async()=>{try{let t=l.filter(t=>""!==t.cost||""!==t.salePrice||""!==t.pvp),r=await (0,b.Gt)(e,t);r&&S(!0)}catch(t){console.log(t.response.data.message)}},E=()=>{S(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n(),{children:(0,o.jsx)("title",{children:"Listas"})}),(0,o.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,o.jsx)(p.Z,{maxWidth:"xl",children:(0,o.jsxs)(h.Z,{spacing:2,children:[(0,o.jsx)(v.Z,{children:(0,o.jsx)(x.Z,{sx:{pt:2},children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Producto"}),(0,o.jsx)("th",{children:"Costo"}),(0,o.jsx)("th",{children:"Venta"}),(0,o.jsx)("th",{children:"PVP"})]})}),(0,o.jsx)("tbody",{children:l.map((t,e)=>{var a;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",id:"productId",disabled:!0,value:null===(a=r[e])||void 0===a?void 0:a.name,onChange:t=>I(e,"productId",t.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:t.cost,onChange:t=>I(e,"cost",t.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:t.salePrice,onChange:t=>I(e,"salePrice",t.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:t.pvp,onChange:t=>I(e,"pvp",t.target.value)})})]},e)})})]})})}),(0,o.jsx)(h.Z,{direction:"row",justifyContent:"flex-end",spacing:2,children:(0,o.jsx)(s.Z,{variant:"contained",onClick:$,children:"Guardar Lista"})})]})})}),(0,o.jsx)(m.Z,{open:y,autoHideDuration:6e3,onClose:E,message:"Guardado correctamente"})]})};f.getLayout=t=>(0,o.jsx)(l.A,{children:t}),e.default=f},8304:function(t,e,r){"use strict";r.d(e,{$l:function(){return i},Gt:function(){return l},TY:function(){return s},yr:function(){return n}});var o=r(5121);let a="http://localhost:3000/api",n=async()=>{try{let t=await o.Z.get("".concat(a,"/lists"));return t.data}catch(t){throw console.error("Error fetching lists:",t),t}},i=async t=>{try{let e=await o.Z.post("".concat(a,"/lists"),t);return e.data}catch(t){throw console.error("Error creating list:",t),t}},l=async(t,e)=>{try{let r=await o.Z.post("".concat(a,"/lists/products"),{listId:t,products:e});return r.data}catch(t){throw console.error("Error creating list:",t),t}},s=async t=>{try{let e=await o.Z.get("".concat(a,"/lists/products/").concat(t,"/true"));return e.data}catch(t){throw console.error("Error creating list:",t),t}}},9100:function(t,e,r){"use strict";r.d(e,{X:function(){return n},r:function(){return i}});var o=r(5121);let a="http://localhost:3000/api",n=async()=>{try{let t=await o.Z.get("".concat(a,"/products"));return t.data}catch(t){throw console.error("Error fetching roles:",t),t}},i=async t=>{try{let e=await o.Z.post("".concat(a,"/products"),t);return e.data}catch(t){throw console.error("Error fetching users:",t),t}}}},function(t){t.O(0,[823,904,709,972,371,798,334,774,888,179],function(){return t(t.s=7625)}),_N_E=t.O()}]);