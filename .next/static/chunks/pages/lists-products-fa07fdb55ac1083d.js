(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{3321:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});var o=r(3366),a=r(7462),n=r(7294),i=r(6010),l=r(7925),s=r(4780),c=r(1796),d=r(948),u=r(1657),p=r(7739),h=r(8216),v=r(1588),x=r(4867);function g(e){return(0,x.Z)("MuiButton",e)}let m=(0,v.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),b=n.createContext({});var f=r(5893);let y=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],S=e=>{let{color:t,disableElevation:r,fullWidth:o,size:n,variant:i,classes:l}=e,c={root:["root",i,`${i}${(0,h.Z)(t)}`,`size${(0,h.Z)(n)}`,`${i}Size${(0,h.Z)(n)}`,"inherit"===t&&"colorInherit",r&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,h.Z)(n)}`],endIcon:["endIcon",`iconSize${(0,h.Z)(n)}`]},d=(0,s.Z)(c,g,l);return(0,a.Z)({},l,d)},z=e=>(0,a.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Z=(0,d.ZP)(p.Z,{shouldForwardProp:e=>(0,d.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${(0,h.Z)(r.color)}`],t[`size${(0,h.Z)(r.size)}`],t[`${r.variant}Size${(0,h.Z)(r.size)}`],"inherit"===r.color&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var r,o;return(0,a.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,a.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":(0,a.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${m.focusVisible}`]:(0,a.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${m.disabled}`]:(0,a.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"contained"===t.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${(0,c.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.vars?e.vars.palette.text.primary:null==(r=(o=e.palette).getContrastText)?void 0:r.call(o,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${m.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${m.disabled}`]:{boxShadow:"none"}}),w=(0,d.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.startIcon,t[`iconSize${(0,h.Z)(r.size)}`]]}})(({ownerState:e})=>(0,a.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},z(e))),C=(0,d.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.endIcon,t[`iconSize${(0,h.Z)(r.size)}`]]}})(({ownerState:e})=>(0,a.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},z(e))),j=n.forwardRef(function(e,t){let r=n.useContext(b),s=(0,l.Z)(r,e),c=(0,u.Z)({props:s,name:"MuiButton"}),{children:d,color:p="primary",component:h="button",className:v,disabled:x=!1,disableElevation:g=!1,disableFocusRipple:m=!1,endIcon:z,focusVisibleClassName:j,fullWidth:I=!1,size:$="medium",startIcon:E,type:k,variant:R="text"}=c,P=(0,o.Z)(c,y),_=(0,a.Z)({},c,{color:p,component:h,disabled:x,disableElevation:g,disableFocusRipple:m,fullWidth:I,size:$,type:k,variant:R}),N=S(_),T=E&&(0,f.jsx)(w,{className:N.startIcon,ownerState:_,children:E}),L=z&&(0,f.jsx)(C,{className:N.endIcon,ownerState:_,children:z});return(0,f.jsxs)(Z,(0,a.Z)({ownerState:_,className:(0,i.Z)(r.className,N.root,v),component:h,disabled:x,focusRipple:!m,focusVisibleClassName:(0,i.Z)(N.focusVisible,j),ref:t,type:k},P,{classes:N,children:[T,d,L]}))});var I=j},7625:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lists-products",function(){return r(370)}])},370:function(e,t,r){"use strict";r.r(t);var o=r(5893),a=r(9008),n=r.n(a),i=r(1163),l=r(8334),s=r(3321),c=r(9100),d=r(7294),u=r(7357),p=r(5582),h=r(6447),v=r(6242),x=r(4267),g=r(4371),m=r(6798),b=r(6696);let f=()=>{let e=(0,i.useRouter)(),{id:t}=e.query,[r,a]=(0,d.useState)([]),[l,f]=(0,d.useState)([]),[y,S]=(0,d.useState)(!1),[z,Z]=(0,d.useState)(!1),w=async()=>{try{let e=await (0,c.X)();a(e);let t=e.map(e=>({productId:e._id,cost:"",salePrice:"",pvp:""}));f(t),Z(!0)}catch(e){console.error("Error fetching products:",e)}},C=async e=>{try{let t=await (0,b.TY)(e);return t}catch(e){console.error("Error fetching products:",e)}return[]},j=e=>{let t=r.map(t=>{let r=e.find(e=>e.productId===t._id);return{productId:t._id,cost:r&&r.cost||"",salePrice:r&&r.salePrice||"",pvp:r&&r.pvp||""}});f(t)};(0,d.useEffect)(()=>{w().then(()=>{z&&t&&C(t).then(e=>{console.log(e),j(e)}).catch(e=>{console.error("Error fetching products for list:",e)})})},[z,t]);let I=(e,t,r)=>{let o=[...l];o[e][t]=r,f(o)},$=async()=>{try{let e=l.filter(e=>""!==e.cost||""!==e.salePrice||""!==e.pvp),r=await (0,b.Gt)(t,e);r&&S(!0)}catch(e){console.log(e.response.data.message)}},E=()=>{S(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n(),{children:(0,o.jsx)("title",{children:"Listas"})}),(0,o.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,o.jsx)(p.Z,{maxWidth:"xl",children:(0,o.jsxs)(h.Z,{spacing:2,children:[(0,o.jsx)(v.Z,{children:(0,o.jsx)(x.Z,{sx:{pt:2},children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Producto"}),(0,o.jsx)("th",{children:"Costo"}),(0,o.jsx)("th",{children:"Venta"}),(0,o.jsx)("th",{children:"PVP"})]})}),(0,o.jsx)("tbody",{children:l.map((e,t)=>{var a;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",id:"productId",disabled:!0,value:null===(a=r[t])||void 0===a?void 0:a.name,onChange:e=>I(t,"productId",e.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:e.cost,onChange:e=>I(t,"cost",e.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:e.salePrice,onChange:e=>I(t,"salePrice",e.target.value)})}),(0,o.jsx)("td",{children:(0,o.jsx)(g.Z,{size:"small",value:e.pvp,onChange:e=>I(t,"pvp",e.target.value)})})]},t)})})]})})}),(0,o.jsx)(h.Z,{direction:"row",justifyContent:"flex-end",spacing:2,children:(0,o.jsx)(s.Z,{variant:"contained",onClick:$,children:"Guardar Lista"})})]})})}),(0,o.jsx)(m.Z,{open:y,autoHideDuration:6e3,onClose:E,message:"Guardado correctamente"})]})};f.getLayout=e=>(0,o.jsx)(l.A,{children:e}),t.default=f},6696:function(e,t,r){"use strict";r.d(t,{$l:function(){return i},Gt:function(){return l},TY:function(){return s},yr:function(){return n}});var o=r(5121);let a="http://217.196.49.92:3000/api",n=async()=>{try{let e=await o.Z.get("".concat(a,"/lists"));return e.data}catch(e){throw console.error("Error fetching lists:",e),e}},i=async e=>{try{let t=await o.Z.post("".concat(a,"/lists"),e);return t.data}catch(e){throw console.error("Error creating list:",e),e}},l=async(e,t)=>{try{let r=await o.Z.post("".concat(a,"/lists/products"),{listId:e,products:t});return r.data}catch(e){throw console.error("Error creating list:",e),e}},s=async e=>{try{let t=await o.Z.get("".concat(a,"/lists/products/").concat(e,"/true"));return t.data}catch(e){throw console.error("Error creating list:",e),e}}},9100:function(e,t,r){"use strict";r.d(t,{X:function(){return n},r:function(){return i}});var o=r(5121);let a="http://217.196.49.92:3000/api",n=async()=>{try{let e=await o.Z.get("".concat(a,"/products"));return e.data}catch(e){throw console.error("Error fetching roles:",e),e}},i=async e=>{try{let t=await o.Z.post("".concat(a,"/products"),e);return t.data}catch(e){throw console.error("Error fetching users:",e),e}}}},function(e){e.O(0,[823,904,709,972,371,798,334,774,888,179],function(){return e(e.s=7625)}),_N_E=e.O()}]);