(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{8154:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/big-order-details",function(){return e(8289)}])},8289:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return O}});var n=e(5893),c=e(9008),a=e.n(c),o=e(1163),s=e(8334),i=e(9100),l=e(7294),u=e(4371),d=e(8102),h=e(7906),p=e(3184),f=e(3816),x=e(295),g=e(7357),y=e(5582),w=e(6447),Z=e(6242),E=e(4267),_=e(5121);let j=async t=>{try{let r=await _.Z.post("".concat("http://217.196.49.92:3000/api","/orders/get-orders-by-date"),{date:t});return r.data}catch(t){throw console.error("Error fetching orders:",t),t}};var m=e(5642),b=e(1506);let v=()=>{let t=(0,o.useRouter)(),{id:r}=t.query,[e,c]=(0,l.useState)([]),[s,_]=(0,l.useState)([]),[v,O]=(0,l.useState)([]),[C,N]=(0,l.useState)({}),T=async()=>{try{let t=await (0,m.aK)(r);return t}catch(t){console.error("Error fetching products:",t)}},k=async()=>{try{let t=await (0,i.X)();c(t)}catch(t){console.error("Error fetching products:",t)}},P=async t=>{try{let r=await j(t);O(r)}catch(t){console.error("Error fetching products:",t)}},X=async()=>{try{let t=await (0,b.u)();_(t)}catch(t){console.error("Error fetching products:",t)}};(0,l.useEffect)(()=>{k(),X(),T().then(t=>{t&&t.date&&P(t.date)})},[]);let I=(t,r,e)=>{N(n=>({...n,["".concat(t,"_").concat(r)]:parseInt(e,10)||0}))},L=()=>{console.log("Cantidades editadas:",C)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:"Listas"})}),(0,n.jsx)(g.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,n.jsx)(y.Z,{maxWidth:"xl",children:(0,n.jsx)(w.Z,{spacing:2,children:(0,n.jsx)(Z.Z,{children:(0,n.jsxs)(E.Z,{sx:{pt:0},children:[(()=>{let t=["PRODUCTO",...s.map(t=>t.name)],r=["PRODUCTO",...s.map(t=>t._id)],c=e.map(t=>{let e=[t.displayName],c=0;return r.slice(1).forEach(r=>{let a=v.find(t=>t.order.shop===r),o=a?a.details.find(r=>r.product===t._id):null,s=C["".concat(t._id,"_").concat(r)],i=void 0!==s?s:o?o.PEDI_REAL:0;c+=parseInt(i,10),e.push((0,n.jsx)(u.Z,{type:"number",value:i,onChange:e=>I(t._id,r,e.target.value),variant:"outlined",sx:{p:0}}))}),e.push((0,n.jsx)(d.Z,{sx:{p:0,fontWeight:"bold"},children:c},"total")),e}),a=["TOTAL"];return s.forEach(t=>{let r=c.reduce((r,e)=>r+parseInt(e[s.indexOf(t)+1],10),0);a.push((0,n.jsx)(d.Z,{sx:{p:0,fontWeight:"bold"},children:r},"".concat(t._id,"_total")))}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsx)(f.Z,{children:t.map((t,r)=>(0,n.jsx)(d.Z,{children:t},r))})}),(0,n.jsx)(x.Z,{children:c.map((t,r)=>(0,n.jsx)(f.Z,{sx:{pt:0},children:t.map((t,r)=>(0,n.jsx)(d.Z,{sx:{p:1},children:t},r))},r))})]})})(),(0,n.jsx)("button",{onClick:L,children:"Guardar"})]})})})})})]})};v.getLayout=t=>(0,n.jsx)(s.A,{children:t});var O=v},5642:function(t,r,e){"use strict";e.d(r,{XO:function(){return a},aK:function(){return o},gi:function(){return s}});var n=e(5121);let c="http://217.196.49.92:3000/api",a=async()=>{try{let t=await n.Z.get("".concat(c,"/big-orders"));return t.data}catch(t){throw console.error("Error fetching cities:",t),t}},o=async t=>{try{let r=await n.Z.get("".concat(c,"/big-orders/").concat(t));return r.data}catch(t){throw console.error("Error fetching cities:",t),t}},s=async t=>{try{let r=await n.Z.post("".concat(c,"/big-orders"),t);return r.data}catch(t){throw console.error("Error creating cities:",t),t}}},9100:function(t,r,e){"use strict";e.d(r,{X:function(){return a},r:function(){return o}});var n=e(5121);let c="http://217.196.49.92:3000/api",a=async()=>{try{let t=await n.Z.get("".concat(c,"/products"));return t.data}catch(t){throw console.error("Error fetching roles:",t),t}},o=async t=>{try{let r=await n.Z.post("".concat(c,"/products"),t);return r.data}catch(t){throw console.error("Error fetching users:",t),t}}},1506:function(t,r,e){"use strict";e.d(r,{B:function(){return o},u:function(){return a}});var n=e(5121);let c="http://217.196.49.92:3000/api",a=async()=>{try{let t=await n.Z.get("".concat(c,"/shops"));return t.data}catch(t){throw console.error("Error fetching shops:",t),t}},o=async t=>{try{let r=await n.Z.post("".concat(c,"/shops"),t);return r.data}catch(t){throw console.error("Error fetching shops:",t),t}}}},function(t){t.O(0,[823,904,709,972,371,71,334,774,888,179],function(){return t(t.s=8154)}),_N_E=t.O()}]);