(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{2108:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shops",function(){return t(4611)}])},4611:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return R}});var n=t(5893),a=t(9008),s=t.n(a),i=t(8005),c=t(7357),o=t(5582),l=t(6447),d=t(5861),h=t(3321),u=t(3219),x=t(4150),j=t(8334),m=t(6242),f=t(7906),p=t(3184),Z=t(3816),g=t(8102),y=t(295),v=t(2377);let w=e=>{let{items:r=[]}=e;return(0,n.jsx)(m.Z,{children:(0,n.jsx)(v.L,{children:(0,n.jsx)(c.Z,{sx:{minWidth:800},children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(g.Z,{children:"Nombre"}),(0,n.jsx)(g.Z,{children:"Direcci\xf3n"}),(0,n.jsx)(g.Z,{children:"Gerente"}),(0,n.jsx)(g.Z,{children:"Tel\xe9fono"}),(0,n.jsx)(g.Z,{children:"Estado"})]})}),(0,n.jsx)(y.Z,{children:r.map(e=>(0,n.jsxs)(Z.Z,{hover:!0,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(l.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,n.jsx)(d.Z,{variant:"subtitle2",children:e.name})})}),(0,n.jsx)(g.Z,{children:e.address}),(0,n.jsx)(g.Z,{children:e.manager}),(0,n.jsx)(g.Z,{children:e.phone}),(0,n.jsx)(g.Z,{children:e.state?"Activo":"Inactivo"})]},e._id))})]})})})})};var b=t(9396),E=t(7709),C=t(7109);let _=()=>(0,n.jsx)(m.Z,{sx:{p:2},children:(0,n.jsx)(E.Z,{defaultValue:"",fullWidth:!0,placeholder:"Buscar local",startAdornment:(0,n.jsx)(C.Z,{position:"start",children:(0,n.jsx)(u.Z,{color:"action",fontSize:"small",children:(0,n.jsx)(b.Z,{})})}),sx:{maxWidth:500}})});var S=t(1506),I=t(7294),W=t(6798),q=t(1737),N=t(8445),P=t(4267),T=t(1426),k=t(4371),A=t(7720),G=t(2023),L=t(7275),D=t(6696),B=t(4505),M=t(6806);let z=()=>{let[e,r]=(0,I.useState)({shopNumber:"",name:"",address:"",manager:"",phone:"",boss:"",bossPhone:"",platformId:"",cityId:"",listId:"",userId:""}),[t,a]=(0,I.useState)(!1),[s,i]=(0,I.useState)("success"),[o,l]=(0,I.useState)(""),d=(e,r)=>{i(e),l(r),a(!0)},u=(e,r)=>{"clickaway"!==r&&a(!1)},[x,j]=(0,I.useState)([]),[f,p]=(0,I.useState)([]),[Z,g]=(0,I.useState)([]),[y,v]=(0,I.useState)([]),w=async()=>{try{let e=await (0,B.R)();j(e)}catch(e){console.error("Error fetching users:",e)}},b=async()=>{try{let e=await (0,L.A)();p(e)}catch(e){console.error("Error fetching platforms:",e)}},E=async()=>{try{let e=await (0,D.yr)();g(e)}catch(e){console.error("Error fetching lists:",e)}},C=async()=>{try{let e=await (0,M.M)();v(e)}catch(e){console.error("Error fetching cities:",e)}},_=t=>{r({...e,[t.target.name]:t.target.value})},z=async()=>{try{await (0,S.B)(e),d("success","Tienda creada correctamente")}catch(e){d("error","Error al crear la tienda"),console.log("Error al guardar la tienda:",e)}};return(0,I.useEffect)(()=>{b(),w(),E(),C()},[]),(0,n.jsxs)("form",{autoComplete:"off",noValidate:!0,onSubmit:e=>e.preventDefault(),children:[(0,n.jsx)(W.Z,{open:t,autoHideDuration:6e3,onClose:u,children:(0,n.jsx)(q.Z,{onClose:u,severity:s,sx:{width:"100%"},children:o})}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(N.Z,{subheader:""}),(0,n.jsx)(P.Z,{sx:{pt:0},children:(0,n.jsx)(c.Z,{sx:{m:-1.5},children:(0,n.jsxs)(T.Z,{container:!0,spacing:3,children:[(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"N\xfamero de tienda",name:"shopNumber",onChange:_,required:!0,value:e.shopNumber})}),(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Nombre de la tienda",name:"name",onChange:_,required:!0,value:e.name})}),(0,n.jsx)(T.Z,{item:!0,xs:12,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Direcci\xf3n",name:"address",onChange:_,required:!0,value:e.address})}),(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Gerente",name:"manager",onChange:_,required:!0,value:e.manager})}),(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Tel\xe9fono",name:"phone",onChange:_,required:!0,value:e.phone})}),(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Jefe/Supervisor",name:"boss",onChange:_,required:!0,value:e.boss})}),(0,n.jsx)(T.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Tel\xe9fono del jefe/supervisor",name:"bossPhone",onChange:_,required:!0,value:e.bossPhone})}),(0,n.jsx)(T.Z,{xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Plataforma",name:"platformId",onChange:_,required:!0,select:!0,SelectProps:{native:!0},value:e.platformId,children:f.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))})}),(0,n.jsx)(T.Z,{xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Ciudad",name:"cityId",onChange:_,required:!0,select:!0,SelectProps:{native:!0},value:e.cityId,children:y.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))})}),(0,n.jsx)(T.Z,{xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Lista",name:"listId",onChange:_,required:!0,select:!0,SelectProps:{native:!0},value:e.listId,children:Z.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))})}),(0,n.jsx)(T.Z,{xs:12,md:6,children:(0,n.jsx)(k.Z,{fullWidth:!0,label:"Mercaderista",name:"userId",onChange:_,required:!0,select:!0,SelectProps:{native:!0},value:e.userId,children:x.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))})})]})})}),(0,n.jsx)(A.Z,{}),(0,n.jsx)(G.Z,{sx:{justifyContent:"flex-end"},children:(0,n.jsx)(h.Z,{variant:"contained",onClick:z,children:"Guardar Tienda"})})]})]})},O=()=>{let[e,r]=(0,I.useState)([]),[t,a]=(0,I.useState)(!1),j=()=>a(!0),m=()=>a(!1),f=async()=>{try{let e=await (0,S.u)();r(e)}catch(e){console.error("Error fetching shops:",e)}};return(0,I.useEffect)(()=>{f()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{children:(0,n.jsx)("title",{children:"Locales"})}),(0,n.jsx)(c.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,n.jsx)(o.Z,{maxWidth:"xl",children:(0,n.jsxs)(l.Z,{spacing:3,children:[(0,n.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,n.jsx)(l.Z,{spacing:1,children:(0,n.jsx)(d.Z,{variant:"h4",children:"Locales"})}),(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,{onClick:j,startIcon:(0,n.jsx)(u.Z,{fontSize:"small",children:(0,n.jsx)(i.Z,{})}),variant:"contained",children:"Agregar nuevo local"})})]}),(0,n.jsx)(_,{}),(0,n.jsx)(w,{count:e.length,items:e}),(0,n.jsx)(x.Z,{open:t,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,n.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Crear Tienda "}),(0,n.jsx)("div",{id:"modal-modal-description",sx:{mt:2},children:(0,n.jsx)(z,{})})]})})]})})})]})};O.getLayout=e=>(0,n.jsx)(j.A,{children:e});var R=O},7275:function(e,r,t){"use strict";t.d(r,{A:function(){return s},T:function(){return i}});var n=t(5121);let a="http://217.196.49.92:3000/api",s=async()=>{try{let e=await n.Z.get("".concat(a,"/platforms"));return e.data}catch(e){throw console.error("Error fetching roles:",e),e}},i=async e=>{try{let r=await n.Z.post("".concat(a,"/platforms"),e);return r.data}catch(e){throw console.error("Error fetching users:",e),e}}},6806:function(e,r,t){"use strict";t.d(r,{M:function(){return s},g:function(){return i}});var n=t(5121);let a="http://217.196.49.92:3000/api",s=async()=>{try{let e=await n.Z.get("".concat(a,"/cities"));return e.data}catch(e){throw console.error("Error fetching cities:",e),e}},i=async e=>{try{let r=await n.Z.post("".concat(a,"/cities"),e);return r.data}catch(e){throw console.error("Error creating cities:",e),e}}},6696:function(e,r,t){"use strict";t.d(r,{$l:function(){return i},Gt:function(){return c},TY:function(){return o},yr:function(){return s}});var n=t(5121);let a="http://217.196.49.92:3000/api",s=async()=>{try{let e=await n.Z.get("".concat(a,"/lists"));return e.data}catch(e){throw console.error("Error fetching lists:",e),e}},i=async e=>{try{let r=await n.Z.post("".concat(a,"/lists"),e);return r.data}catch(e){throw console.error("Error creating list:",e),e}},c=async(e,r)=>{try{let t=await n.Z.post("".concat(a,"/lists/products"),{listId:e,products:r});return t.data}catch(e){throw console.error("Error creating list:",e),e}},o=async e=>{try{let r=await n.Z.get("".concat(a,"/lists/products/").concat(e,"/true"));return r.data}catch(e){throw console.error("Error creating list:",e),e}}},1506:function(e,r,t){"use strict";t.d(r,{B:function(){return i},u:function(){return s}});var n=t(5121);let a="http://217.196.49.92:3000/api",s=async()=>{try{let e=await n.Z.get("".concat(a,"/shops"));return e.data}catch(e){throw console.error("Error fetching shops:",e),e}},i=async e=>{try{let r=await n.Z.post("".concat(a,"/shops"),e);return r.data}catch(e){throw console.error("Error fetching shops:",e),e}}},4505:function(e,r,t){"use strict";t.d(r,{R:function(){return s},r:function(){return i}});var n=t(5121);let a="http://217.196.49.92:3000/api",s=async()=>{try{let e=await n.Z.get("".concat(a,"/users"));return e.data}catch(e){throw console.error("Error fetching users:",e),e}},i=async e=>{try{let r=await n.Z.post("".concat(a,"/users"),e);return r.data}catch(e){throw console.error("Error fetching users:",e),e}}}},function(e){e.O(0,[823,904,709,972,371,498,71,798,808,334,774,888,179],function(){return e(e.s=2108)}),_N_E=e.O()}]);