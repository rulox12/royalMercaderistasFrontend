(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{6086:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customers",function(){return n(18)}])},18:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return O}});var a=n(5893),s=n(9008),t=n.n(s),l=n(8005),i=n(7357),o=n(5582),c=n(6447),d=n(5861),u=n(3321),h=n(3219),x=n(4150),j=n(8334),m=n(6242),Z=n(7906),p=n(3184),f=n(3816),v=n(8102),g=n(295),b=n(2377);let C=e=>{let{items:r=[]}=e;return(0,a.jsx)(m.Z,{children:(0,a.jsx)(b.L,{children:(0,a.jsx)(i.Z,{sx:{minWidth:800},children:(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(p.Z,{children:(0,a.jsxs)(f.Z,{children:[(0,a.jsx)(v.Z,{children:"Nombre"}),(0,a.jsx)(v.Z,{children:"Correo"}),(0,a.jsx)(v.Z,{children:"Celular"}),(0,a.jsx)(v.Z,{children:"Estado"})]})}),(0,a.jsx)(g.Z,{children:r.map(e=>(0,a.jsxs)(f.Z,{hover:!0,children:[(0,a.jsx)(v.Z,{children:(0,a.jsx)(c.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,a.jsxs)(d.Z,{variant:"subtitle2",children:[e.name," ",e.surname]})})}),(0,a.jsx)(v.Z,{children:e.email}),(0,a.jsx)(v.Z,{children:e.phone}),(0,a.jsx)(v.Z,{children:e.state?"Activo":"Inactivo"})]},e._id))})]})})})})};var w=n(9396),y=n(7709),E=n(7109);let _=()=>(0,a.jsx)(m.Z,{sx:{p:2},children:(0,a.jsx)(y.Z,{defaultValue:"",fullWidth:!0,placeholder:"Buscar usuario",startAdornment:(0,a.jsx)(E.Z,{position:"start",children:(0,a.jsx)(h.Z,{color:"action",fontSize:"small",children:(0,a.jsx)(w.Z,{})})}),sx:{maxWidth:500}})});var S=n(4505),W=n(7294),k=n(6798),T=n(1737),q=n(8445),I=n(4267),N=n(1426),A=n(4371),U=n(7720),P=n(2023),D=n(5121);let R=async()=>{try{let e=await D.Z.get("".concat("http://localhost:3000/api","/roles"));return e.data}catch(e){throw console.error("Error fetching roles:",e),e}},z=[{value:"CC",label:"Cedula"},{value:"TI",label:"Tarjeta de identidada"}],G=()=>{let[e,r]=(0,W.useState)({document:"",documentType:"",name:"",surname:"",email:"",phone:"",roleId:""}),[n,s]=(0,W.useState)(!1),[t,l]=(0,W.useState)("success"),[o,c]=(0,W.useState)(""),d=(e,r)=>{l(e),c(r),s(!0)},h=(e,r)=>{"clickaway"!==r&&s(!1)},[x,j]=(0,W.useState)([]),Z=async()=>{try{let e=await R();j(e)}catch(e){console.error("Error fetching users:",e)}},p=(0,W.useCallback)(e=>{r(r=>({...r,[e.target.name]:e.target.value}))},[]),f=(0,W.useCallback)(e=>{e.preventDefault()},[]),v=async()=>{try{let r={...e,password:"123456"};await (0,S.r)(r),d("success","Usuario creado correctamente")}catch(e){d("error","Error al crear usuario"),console.log("Error al guardar usuario:",e)}};return(0,W.useEffect)(()=>{Z()},[]),(0,a.jsxs)("form",{autoComplete:"off",noValidate:!0,onSubmit:f,children:[(0,a.jsx)(k.Z,{open:n,autoHideDuration:6e3,onClose:h,children:(0,a.jsx)(T.Z,{onClose:h,severity:t,sx:{width:"100%"},children:o})}),(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(q.Z,{subheader:""}),(0,a.jsx)(I.Z,{sx:{pt:0},children:(0,a.jsx)(i.Z,{sx:{m:-1.5},children:(0,a.jsxs)(N.Z,{container:!0,spacing:3,children:[(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Tipo de documento",name:"documentType",onChange:p,required:!0,select:!0,SelectProps:{native:!0},value:e.documentType,children:z.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Documento",name:"document",onChange:p,required:!0,value:e.document})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Nombre",name:"name",onChange:p,required:!0,value:e.name})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Apellido",name:"surname",onChange:p,required:!0,value:e.surname})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Correo",name:"email",onChange:p,required:!0,value:e.email})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Celular",name:"phone",onChange:p,required:!0,type:"number",value:e.phone})}),(0,a.jsx)(N.Z,{xs:12,md:6,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Rol",name:"roleId",onChange:p,required:!0,select:!0,SelectProps:{native:!0},value:e.roleId,children:x.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))})})]})})}),(0,a.jsx)(U.Z,{}),(0,a.jsx)(P.Z,{sx:{justifyContent:"flex-end"},children:(0,a.jsx)(u.Z,{variant:"contained",onClick:v,children:"Guardar Usuario"})})]})]})},L=()=>{let[e,r]=(0,W.useState)([]),[n,s]=(0,W.useState)(!1),j=()=>s(!0),m=()=>s(!1),Z=async()=>{try{let e=await (0,S.R)();r(e)}catch(e){console.error("Error fetching users:",e)}};return(0,W.useEffect)(()=>{Z()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t(),{children:(0,a.jsx)("title",{children:"Usuarios"})}),(0,a.jsx)(i.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,a.jsx)(o.Z,{maxWidth:"xl",children:(0,a.jsxs)(c.Z,{spacing:3,children:[(0,a.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,a.jsx)(c.Z,{spacing:1,children:(0,a.jsx)(d.Z,{variant:"h4",children:"Usuarios"})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.Z,{onClick:j,startIcon:(0,a.jsx)(h.Z,{fontSize:"small",children:(0,a.jsx)(l.Z,{})}),variant:"contained",children:"Agregar nuevo usuario"})})]}),(0,a.jsx)(_,{}),(0,a.jsx)(C,{count:e.length,items:e}),(0,a.jsx)(x.Z,{open:n,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,a.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Crear Usuario"}),(0,a.jsx)("div",{id:"modal-modal-description",sx:{mt:2},children:(0,a.jsx)(G,{})})]})})]})})})]})};L.getLayout=e=>(0,a.jsx)(j.A,{children:e});var O=L},4505:function(e,r,n){"use strict";n.d(r,{R:function(){return t},r:function(){return l}});var a=n(5121);let s="http://localhost:3000/api",t=async()=>{try{let e=await a.Z.get("".concat(s,"/users"));return e.data}catch(e){throw console.error("Error fetching users:",e),e}},l=async e=>{try{let r=await a.Z.post("".concat(s,"/users"),e);return r.data}catch(e){throw console.error("Error fetching users:",e),e}}}},function(e){e.O(0,[823,904,709,972,371,498,71,798,808,334,774,888,179],function(){return e(e.s=6086)}),_N_E=e.O()}]);